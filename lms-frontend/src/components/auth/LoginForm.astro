---
const error = Astro.url.searchParams.get('error')
const success = Astro.url.searchParams.get('success')
const redirectPage = Astro.url.searchParams.get('r') || null
---
<h1 class="text-2xl font-bold text-center mb-6">Login</h1>

<form method="POST" action="/auth/login" class="flex flex-col space-y-2">
    <input type="hidden" name="redirectPage" value={redirectPage}/>
    <label>
        <input name="identifier" type="text" placeholder="Email or username" required
               class="border border-gray-700 rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"/>
    </label>
    <label>
        <input name="password" type="password" placeholder="Password" required
               class="border border-gray-700 rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"/>
    </label>
    <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-2 w-full mt-4">Log In</button>
</form>

{error && <p class="text-red-500 text-center mt-4">{decodeURIComponent(error)}</p>}
{success && <p class="text-green-500 text-center mt-4">Registration successful. Please log in.</p>}
